\documentclass[twoside,11pt,openany]{book}
\usepackage[all]{xy}
\usepackage{makeidx,array,multicol,multirow}
\usepackage{epsfig}
\usepackage{amsmath,amsthm}
\usepackage{multicol,enumerate}
\usepackage{amssymb,tabularx,amsfonts}
\usepackage{array,hhline,calc,longtable}
\usepackage{txfonts}
\usepackage{hhline,mathtools}
\usepackage{dcolumn,lscape}
\usepackage{color,units,xfrac,mathrsfs}
\usepackage{url}
\usepackage{steinmetz,cancel,bm,graphicx}

\renewcommand{\theequation}{\arabic{equation}}

\numberwithin{equation}{chapter}


\newcommand\Bpara[4]{%
\begin{picture}(0,0)%
\setlength{\unitlength}{1pt}%
\put(#1,#2){\rotatebox{#3}{\raisebox{0mm}[0mm][0mm]{%
\makebox[0mm]{$\left.\rule{0mm}{#4pt}\right\}$}}}}%
\end{picture}}

\usepackage{tikz}

\newcommand*\mycirc[1]{%
  \tikz[baseline=(C.base)]\node[draw,circle,inner sep=.7pt](C) {#1};\:
}

\makeatletter
\c@tocdepth=1
\c@secnumdepth=4
\makeatother

\def\Ecaption{\refstepcounter{ecount}\centerline{\textbf{Fig. \theecount}}}
\newcounter{ecount}
\def\theecount{P\theexample}

\def\Exmcaption{\refstepcounter{excount}\centerline{\textbf{Fig. \theexcount}}}
\newcounter{excount}
\def\theexcount{E\theexample}

\def\Tcaption{\refstepcounter{ecount}\centerline{\textbf{Table. \theecount}}}
\newcounter{tcount}
\def\theecount{P\theexample}

\def\Exercaption{\refstepcounter{exercount}\centerline{\textbf{Fig. \theexercount}}}
\newcounter{exercount}
\def\theexercount{E\theexer}


\def\Scaption{\refstepcounter{scount}\centerline{\textbf{Fig. \thescount}}}
\newcounter{scount}
\def\thescount{P\theexample.\arabic{scount}}

\def\Examcaption{\refstepcounter{Examcount}\centerline{\textbf{Fig. \theExamcount}}}
\newcounter{Examcount}
\def\theExamcount{E\theexample.\arabic{Examcount}}

\def\SEcaption{\refstepcounter{secount}\centerline{\textbf{Fig. \thesecount}}}
\newcounter{secount}
\def\thesecount{E\theexample.\arabic{secount}}

\newcounter{seecount}
\def\theseecount{E\theexample}
\def\Secaption{\refstepcounter{seecount}{\textbf{Fig.~\theseecount:~}}}

\newcounter{dotseecount}
\def\thedotseecount{E\theexample}
\def\Sedotcaption{\refstepcounter{dotseecount}{\textbf{Fig.~\thedotseecount}}}


\def\Smcaption#1{\refstepcounter{smcount}\centerline{\textbf{Fig. \thesmcount:}~#1}}
\newcounter{smcount}
\def\thesmcount{P\theexam.\arabic{smcount}}

\def\Sexercaption#1{\refstepcounter{sexercount}\centerline{\textbf{Fig. \thesexercount:}~#1}}
\newcounter{sexercount}
\def\thesexercount{E\theexer.\arabic{sexercount}}


\def\Scaptiona{\refstepcounter{scounta}\centerline{\textbf{Fig. \thescounta}}}
\newcounter{scounta}
\def\thescounta{P\theexam.\arabic{scounta}(a)}

\def\Scaptionb{\refstepcounter{scountb}\centerline{\textbf{Fig. \thescountb}}}
\newcounter{scountb}
\def\thescountb{P\theexam.\arabic{scountb}(b)}

\def\Pcaption{\refstepcounter{pcount}\centerline{\textbf{Fig. \thepcount}}}
\newcounter{pcount}
\def\thepcount{P\theproblem}

\def\Pscaption{\refstepcounter{pscount}\centerline{\textbf{Fig. \thepscount}}}
\newcounter{pscount}
\def\thepscount{P\theproblem.\arabic{pscount}}

\def\PEcaption{\refstepcounter{pecount}\centerline{\textbf{Fig. \thepecount}}}
\newcounter{pecount}
\def\thepecount{E\theproblem}

%\oddsidemargin=0.08in
%\evensidemargin=0.2in
%\hoffset2.8in
\makeindex
\makeatletter
\def\@fnsymbol#1{\ensuremath{\ifcase#1\or *\or \dagger\or \ddagger\or
  \mathsection\or \mathparagraph\or \|\or **\or \dagger\dagger
  \or \ddagger\ddagger\or \mathsection\mathsection 
  \or \mathparagraph\mathparagraph \or \|\|\or *{*}*
  \or \dagger\dagger\dagger \or \ddagger\ddagger\ddagger\or
  \mathsection\mathsection\mathsection\or \mathparagraph\mathparagraph
  \mathparagraph \or \|\|\|\else\@ctrerr\fi}}
   \renewcommand{\thefootnote}{\fnsymbol{footnote}}
\makeatother
\renewcommand{\tablename}{Table}
\renewcommand{\figurename}{Figure}
\makeatletter
%\long\def\@makecaption#1#2{%
%  \vskip\abovecaptionskip
%  \sbox\@tempboxa{\textit{#1}  \textbf{#2}}%
%  \ifdim \wd\@tempboxa >\hsize
%    \textbf{#1} \textbf{#2}\par
%  \else
%    \global \@minipagefalse
%    \hb@xt@\hsize{\hfil\box\@tempboxa\hfil}%
%  \fi
%  \vskip\belowcaptionskip}

%\renewcommand \thefigure
%     {\rm\ifnum \c@chapter>\z@ \thechapter.\fi \@arabic\c@figure}

\def\cleardoublepage{\clearpage\if@twoside \ifodd\c@page\else
    \thispagestyle{empty}\hbox{}\newpage\if@twocolumn\hbox{}\newpage\fi\fi\fi}
\makeatother




\input macros
%\input epsf
%\hoffset=-1in

\usepackage[papersize={180mm,240mm},textwidth=14.5cm,textheight=19.5cm,
topmargin=1.4cm,botmargin=1.4cm,leftmargin=18mm,rightmargin=17mm,
headheight=5mm,headsep=5mm,footskip=.7cm,cropmarks,nopagenumbers]{zwpagelayout}

%\setlength{\textwidth}{14.5cm}
%\setlength{\textheight}{19.5cm}
%\setlength{\headsep}{16.4528pt}
\theoremstyle{plain}
\newtheoremstyle{thnm}{3pt}{2pt}{\itshape}{}{\bfseries}{}
{ }{\colorbox{black}{\textcolor{white}{\bf #1 #2}}\;}
\theoremstyle{thnm}
\newtheorem{thnm}{Theorem}
%\newtheorem{relation}{Relation}
%\newtheorem{thnm}{Theorem}
\newtheoremstyle{st}{}{}{\rm}{}%
{\bfseries}{ }{ }{#1 #2:\mdseries #3}
\theoremstyle{st}

\newtheoremstyle{pro}{}{}{\rm}{}%
{}{ }{ }{#1}
\theoremstyle{pro}
\newtheorem{pro}{\underline{Proof} :}%%


\newtheorem{stage}{Stage}



\newtheoremstyle{nonum}{}{}{\itshape}{}%
{\bfseries}{:}{ }{#1 \mdseries #3}
\newtheoremstyle{nonpro}{}{}{\rm}{}%
{\bfseries}{:}{ }{#1 \mdseries #3}

\newtheoremstyle{nonumber}{}{}{\rm}{}{\bfseries}{}{ }{\it\bfseries #1. #3}
\theoremstyle{nonumber}
\newtheorem{solution}{Solution}
\newtheorem{exam*}{Example}


\theoremstyle{nonum}


%% without no.
\newtheoremstyle{cor}{3pt}{3pt}{\itshape}{}{\bfseries}{:}
{ }{}
%\theoremstyle{cor}
\newtheorem{cor}{Corollary}


%%with no.
\newtheoremstyle{corno}{3pt}{3pt}{\itshape}{}{\bfseries}{.\;}
{ }{}
\theoremstyle{corno}
\newtheorem{corno}{Corollary}


%%with no. box
\newtheoremstyle{cornobox}{3pt}{3pt}{\itshape}{}{\bfseries}{}
{ }{\colorbox{white}{\textcolor{black}{\bf #1:}}\;}
\theoremstyle{cornobox}
\newtheorem{cornobox}{Corollary}

%\newtheorem{cor}{Corollary}
\theoremstyle{nonpro}


\newtheoremstyle{gen}{3pt}{2pt}{\itshape}{}{\bfseries}{}
{ }{\colorbox{black}{\textcolor{white}{\bf #1}}\;}
\theoremstyle{gen}
\newtheorem{gen}{Generalization}

%%%%% example without box and also with no.
\newtheoremstyle{exam}{3pt}{2pt}{}{}{\bfseries}{.}{ }{}
\theoremstyle{exam}
\newtheorem{exam}{Example}
%%%%%%%%%%%%
%%%%%%%%
\newtheoremstyle{example}{3pt}{2pt}{\fontshape{it}\fontsize{11}{16}\selectfont}{}{\bfseries}{}
{ }{\colorbox{black}{\textcolor{white}{\bf #1 #2}}\;}
\theoremstyle{example}
\newtheorem{example}{Example}[chapter]
%%%%

%%%%%%%% Example without number %%%%%%%%
\newtheoremstyle{exampleno}{3pt}{2pt}{\fontshape{it}\fontsize{11}{16}\selectfont}{}{\bfseries}{}
{ }{\colorbox{black}{\textcolor{white}{\bf #1}}\;}
\theoremstyle{exampleno}
\newtheorem{exampleno}{Example}
%%%%%%%%%

\newenvironment{Ventry}[1]%
{\begin{list}{}{\renewcommand{\makelabel}[1]{\textsf{##1:}\hfil}%
\settowidth{\labelwidth}{\textsf{#1:}}%
\setlength{\leftmargin}{\labelwidth+\labelsep}}}%
{\end{list}}



\renewcommand{\thefootnote}{\fnsymbol{footnote}}

\def\heading#1{\medskip{\noindent\textbf{\large #1}}}
\def\itheading#1{\medskip{\noindent{\it\bfseries\large #1}}}

\def\them{
\begin{center}
\rule{6cm}{1pt}\\[-3pt]
{\noindent\textbf{\large Theorem}}\\[-8pt]
\rule{6cm}{1pt}
\end{center}}

\newcommand{\puttri}{\noindent\llap{$\square$\;}}

%%%%%%%%%%%%% float packages%%%%%%%%%%%%%
%%% Need to uncomment this portion
\usepackage{float}
\floatstyle{plain}
\floatplacement{Figure}{H}
%\usepackage{subfigure}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\hfuzz=0.55pt
\def\dsize{\fontsize{10}{12}\selectfont}
\def\Subsection#1{\subsection{#1}\markright{{\it\bfseries\thesubsection.~#1}}}


\DeclareMathOperator{\cosec}{cosec}

\def\p{\partial}
\def\v{\varphi}

\def\be{\begin{equation}}
\def\ee{\end{equation}}
\def\bes{\begin{equation*}}
\def\ees{\end{equation*}}


\usepackage{fancyhdr}
\pagestyle{fancy}
\renewcommand{\footrulewidth}{0pt}
\chead[]{}
\lhead[\small\it\bfseries Basic Electronics]{} 
%\lhead[\small\it\bfseries I-PUC~ Mathematics]{\small\rightmark} 
\rhead[]{\small\leftmark}
\lfoot[]{}
\cfoot[\small\bf\thepage]{\small\bf\thepage}
\rfoot[]{}
\renewcommand\chaptermark[1]{\markboth{\bfseries\thechapter.~\slshape #1}{}}
\renewcommand\sectionmark[1]{\markright{\bfseries\thesection.~\slshape #1}}

\fancypagestyle{plain}{%
\fancyhf{} % clear all header and footer fields
\fancyfoot[C]{\bfseries \thepage} % except the center
\renewcommand{\headrulewidth}{0pt}}

\usepackage{caption}
\captionsetup[figure]{textfont=bf,labelfont=bf,justification=centering}
\captionsetup[table]{textfont=it,labelfont=bf,justification=centering}
\showcaptionsetup{figure}
\renewcommand{\tablename}{Table}
\renewcommand{\figurename}{Fig.}
%\makeatletter
%\renewcommand\thefigure
%     {\rm\ifnum \c@chapter>\z@ {\thechapter.\fi \@arabic\c@figure}}
%\makeatother

\begin{document}
\frontmatter

%%%%%%%%%%%%%%%%%%%%%%%%%%Table of contents
\renewcommand\contentsname{Table of Contents}
\makeatletter
%\renewcommand\section{\@startsection {section}{1}{0mm}%
%                                   {-0.9ex \@plus -0.5ex \@minus -.2ex}%
%                                   {0.8ex \@plus.2ex}%
%                                   {\normalfont\Large\bfseries}}
%\renewcommand\subsection{\@startsection{subsection}{2}{0mm}%
%                                     {-0.9ex\@plus -1ex \@minus -.2ex}%
%                                     {0.8ex \@plus .2ex}%
%                                     {\normalfont\Large\bfseries}}

\def\@makeschapterhead#1{%
  \vspace*{2.5\p@}%
  {\parindent \z@ \centering
    \normalfont
    \interlinepenalty\@M
    \Huge\bfseries  #1
    \vskip 1\p@
    \indent\rule{\textwidth}{2pt} 
    \vskip 10pt
 }}
\makeatother
%\input halftitle
%\input mainpage
%\newpage
%\input info
%\input foreword
%\input preface
%\newpage

\makeatletter
\def\@makeschapterhead#1{%
  \vspace*{2.5\p@}%
  {\parindent \z@ \centering
    \normalfont
    \interlinepenalty\@M
    \Huge\bfseries  #1
    \vskip 1\p@
    \indent\rule{\textwidth}{2pt} 
    \vskip 10pt
 }}
\makeatother
\thispagestyle{empty}
%\baselineskip=\odimen



%%%%%%%%%%%%%%%%%%

\allowdisplaybreaks

\newdimen\odimen
\odimen=\baselineskip
\makeatletter
\def\@makeschapterhead#1{%
  \vspace*{2.5\p@}%
\baselineskip=15.3pt
  {\parindent \z@ \centering
    \normalfont
    \thispagestyle{empty}
    \interlinepenalty\@M
    \Huge\bfseries  #1\par\nobreak
    \vskip 12\p@
    \hrule height 2pt 
    %\markboth{}{}
    %\markright{}
    \vskip 10pt
 }}
\makeatother
\thispagestyle{empty}
\baselineskip=\odimen

\tableofcontents

\mainmatter

%%%%%%%%%%%%%%%%%%%%%%%%%

\input chapter1
\input chapter2
\setcounter{chapter}{3}
\input chapter4
\input chapter5
\input chapter6
\setcounter{chapter}{7}
\input chapter8
\input chapter9
\newpage

%\input qpaper
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%Redefining index

\rhead[]{\bf\em Index}
\makeatletter
\renewenvironment{theindex}{\newpage
\@makeschapterhead{\indexname}
   \markboth{\it\bfseries \indexname}%
                        {\it\bfseries\indexname}%
\addtocontents{toc}{\protect\contentsline{chapter}{Index}{\thepage--435}}
\thispagestyle{plain}\let\item\@idxitem

\begin{multicols}{3}
\par\bigskip}%
{\end{multicols}}%

\makeatother
{\printindex}\relax

%\input qpaper
\end{document}
